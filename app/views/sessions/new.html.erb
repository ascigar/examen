<%= form_with(scope: :sessions, url: login_path, local: true) do |form|%>
  <div class="field">
    <%= form.label :email %>
    <%= form.email_field :email, class: "form-control", required: true %>
    <div class="invalid-feedback">
      Ingrese su correo electronico. Ejemplo: ejemplo@ejemplo.com
    </div>
  </div>

  <div class="field">
    <%= form.label :password %>
    <%= form.password_field :password, class: "form-control" %>
    <div class="invalid-feedback">
      Ingrese su contrase√±a. Unicamente caracteres alfanumericos. Minimo 6 caracteres. 
    </div>
  </div>

  <div class="actions">
    <%= form.submit "Log in", class: "hey", onclick: "valid();" %>
  </div>

<% end %>


<script>

  function valid() {
    var n = document.getElementsByClassName('form-control')

    for (let index = 0; index < n.length; index++) {
      if(n[index].value == ""){
        n[index].classList.add("is-invalid")
      }else{
        n[index].classList.add("is-valid")
      }
    }
  }

  document.getElementById('sessions_email').onkeyup = function () {
    var l = document.getElementById('sessions_email')
    if(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(l.value.toString())){
      l.classList.add('is-valid')
      l.classList.remove('is-invalid')
    }else{
      l.classList.add('is-invalid')
      l.classList.remove('is-valid')
    }
  }

  document.getElementById('sessions_password').onkeyup = function () {
    var l = document.getElementById('sessions_password')
    if(l.value.length >= 6){
      if(/^[a-zA-Z0-9_]*$/.test(l.value.toString())){
        l.classList.add('is-valid')
        l.classList.remove('is-invalid')
      }else{
        l.classList.add('is-invalid')
        l.classList.remove('is-valid')
      }
    }else{
      l.classList.add('is-invalid')
      l.classList.remove('is-valid')
    }
  }
</script>